### üìö SWAGGER SALE SYSTEM API TESTING
### BaloZone Backend - Sale Campaign Management
### Test all 15 Sale System endpoints documented in Swagger

@baseUrl = http://localhost:8000/api
@adminToken = Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2xvZ2luIiwiaWF0IjoxNzE4Nzg4Nzk3LCJleHAiOjE3MTg3OTIzOTcsIm5iZiI6MTcxODc4ODc5NywianRpIjoiUXFQd2c3M3FlaGJmOFFGdCIsInN1YiI6IjMiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.CBOj6bPKZN1wnAWJWZ6kx7_2gNdchQdaB8h5rl-fOW8

### =================================
### üìã 1. PUBLIC ENDPOINTS (4 APIs)
### =================================

### 1.1 GET Active Sale Campaigns (Public)
GET {{baseUrl}}/sale-campaigns-active
Content-Type: application/json

### 1.2 GET Active Sale Campaigns - Featured Only (Public)
GET {{baseUrl}}/sale-campaigns-active?featured=true
Content-Type: application/json

### 1.3 GET Products On Sale (Public)
GET {{baseUrl}}/products-on-sale?per_page=5
Content-Type: application/json

### 1.4 GET Products On Sale - With Filters (Public)
GET {{baseUrl}}/products-on-sale?min_discount=40&sort_by=discount&sort_order=desc&per_page=10
Content-Type: application/json

### 1.5 GET Products On Sale - Category Filter (Public)
GET {{baseUrl}}/products-on-sale?category_id=1&min_price=500000&max_price=2000000
Content-Type: application/json

### 1.6 GET Sale Campaigns for Product (Public)
GET {{baseUrl}}/products/1/sale-campaigns
Content-Type: application/json

### =================================
### üîê 2. ADMIN CRUD ENDPOINTS (7 APIs)
### =================================

### 2.1 GET All Sale Campaigns (Admin)
GET {{baseUrl}}/sale-campaigns
Authorization: {{adminToken}}
Content-Type: application/json

### 2.2 GET Sale Campaigns - With Filters (Admin)
GET {{baseUrl}}/sale-campaigns?status=active&featured=true&per_page=10
Authorization: {{adminToken}}
Content-Type: application/json

### 2.3 CREATE New Sale Campaign (Admin)
POST {{baseUrl}}/sale-campaigns
Authorization: {{adminToken}}
Content-Type: application/json

{
  "name": "Test Campaign via Swagger",
  "slug": "test-campaign-swagger",
  "description": "Campaign created via Swagger API documentation testing",
  "banner_image": "campaigns/test-swagger.jpg",
  "start_date": "2025-07-01 00:00:00",
  "end_date": "2025-07-31 23:59:59",
  "status": "draft",
  "is_featured": false,
  "priority": 5,
  "metadata": {
    "color": "#FF6B35",
    "tags": ["swagger-test", "documentation"],
    "description_short": "Test campaign from Swagger docs"
  }
}

### 2.4 GET Sale Campaign Details (Admin)
GET {{baseUrl}}/sale-campaigns/1
Authorization: {{adminToken}}
Content-Type: application/json

### 2.5 UPDATE Sale Campaign (Admin)
PUT {{baseUrl}}/sale-campaigns/1
Authorization: {{adminToken}}
Content-Type: application/json

{
  "name": "Updated Black Friday 2025",
  "slug": "updated-black-friday-2025",
  "description": "Updated si√™u sale Black Friday - Gi·∫£m gi√° kh·ªßng l√™n ƒë·∫øn 80%",
  "banner_image": "campaigns/updated-black-friday-2025.jpg",
  "start_date": "2025-11-24 00:00:00",
  "end_date": "2025-11-30 23:59:59",
  "status": "active",
  "is_featured": true,
  "priority": 10,
  "metadata": {
    "color": "#000000",
    "tags": ["black-friday", "mega-sale", "updated"],
    "description_short": "Gi·∫£m gi√° l√™n ƒë·∫øn 80% - UPDATED"
  }
}

### 2.6 GET Products in Sale Campaign (Admin)
GET {{baseUrl}}/sale-campaigns/1/products?per_page=10
Authorization: {{adminToken}}
Content-Type: application/json

### 2.7 ADD Products to Sale Campaign (Admin)
POST {{baseUrl}}/sale-campaigns/1/products
Authorization: {{adminToken}}
Content-Type: application/json

{
  "products": [
    {
      "product_id": 5,
      "sale_price": 850000.00,
      "discount_type": "percentage",
      "max_quantity": 25
    },
    {
      "product_id": 6,
      "sale_price": 650000.00,
      "discount_type": "fixed_amount",
      "max_quantity": 30
    }
  ]
}

### 2.8 REMOVE Product from Sale Campaign (Admin)
DELETE {{baseUrl}}/sale-campaigns/1/products/5
Authorization: {{adminToken}}
Content-Type: application/json

### 2.9 DELETE Sale Campaign (Admin)
DELETE {{baseUrl}}/sale-campaigns/4
Authorization: {{adminToken}}
Content-Type: application/json

### =================================
### ‚öôÔ∏è 3. ADMIN MANAGEMENT ENDPOINTS (4 APIs)
### =================================

### 3.1 Toggle Sale Campaign Status (Admin)
PATCH {{baseUrl}}/admin/sale-campaigns/2/toggle-status
Authorization: {{adminToken}}
Content-Type: application/json

### 3.2 Toggle Sale Campaign Featured Status (Admin)
PATCH {{baseUrl}}/admin/sale-campaigns/2/toggle-featured
Authorization: {{adminToken}}
Content-Type: application/json

### 3.3 Duplicate Sale Campaign (Admin)
POST {{baseUrl}}/admin/sale-campaigns/1/duplicate
Authorization: {{adminToken}}
Content-Type: application/json

### 3.4 GET Sale Campaigns Statistics (Admin)
GET {{baseUrl}}/admin/sale-campaigns/stats
Authorization: {{adminToken}}
Content-Type: application/json

### =================================
### üìä 4. VALIDATION & ERROR TESTING
### =================================

### 4.1 Test Validation Errors - Create Campaign
POST {{baseUrl}}/sale-campaigns
Authorization: {{adminToken}}
Content-Type: application/json

{
  "name": "",
  "slug": "",
  "start_date": "invalid-date",
  "end_date": "2025-01-01",
  "status": "invalid-status"
}

### 4.2 Test Unauthorized Access
GET {{baseUrl}}/sale-campaigns
Content-Type: application/json

### 4.3 Test Not Found Error
GET {{baseUrl}}/sale-campaigns/999999
Authorization: {{adminToken}}
Content-Type: application/json

### 4.4 Test Invalid Product Addition
POST {{baseUrl}}/sale-campaigns/1/products
Authorization: {{adminToken}}
Content-Type: application/json

{
  "products": [
    {
      "product_id": "invalid",
      "sale_price": -100,
      "discount_type": "invalid"
    }
  ]
}

### =================================
### üîç 5. ADVANCED FILTERING TESTS
### =================================

### 5.1 Complex Product Filter - Multiple Conditions
GET {{baseUrl}}/products-on-sale?category_id=1&brand_id=2&min_discount=30&max_discount=70&min_price=500000&max_price=1500000&sort_by=discount&sort_order=desc&per_page=5
Content-Type: application/json

### 5.2 Sort by Sale Price
GET {{baseUrl}}/products-on-sale?sort_by=sale_price&sort_order=asc&per_page=8
Content-Type: application/json

### 5.3 Filter by Discount Range
GET {{baseUrl}}/products-on-sale?min_discount=50&sort_by=discount&sort_order=desc
Content-Type: application/json

### 5.4 Pagination Test
GET {{baseUrl}}/products-on-sale?per_page=3&page=2
Content-Type: application/json

### =================================
### üìà 6. PERFORMANCE & EDGE CASES
### =================================

### 6.1 Max Per Page Test
GET {{baseUrl}}/products-on-sale?per_page=100
Content-Type: application/json

### 6.2 Large Campaign ID Test
GET {{baseUrl}}/sale-campaigns/1/products?per_page=50
Content-Type: application/json

### 6.3 Empty Filter Results
GET {{baseUrl}}/products-on-sale?category_id=999&brand_id=999
Content-Type: application/json

### 6.4 Boundary Discount Values
GET {{baseUrl}}/products-on-sale?min_discount=0&max_discount=100
Content-Type: application/json

### =================================
### ‚úÖ EXPECTED RESULTS SUMMARY:
### =================================
###
### PUBLIC ENDPOINTS (4):
### ‚úÖ GET /sale-campaigns-active ‚Üí 200 (Active campaigns list)
### ‚úÖ GET /products-on-sale ‚Üí 200 (Sale products with filters)
### ‚úÖ GET /sale-campaigns/{id}/products ‚Üí 200 (Campaign products)
### ‚úÖ GET /products/{id}/sale-campaigns ‚Üí 200 (Product campaigns)
###
### ADMIN CRUD (7):
### ‚úÖ GET /sale-campaigns ‚Üí 200 (All campaigns - Admin)
### ‚úÖ POST /sale-campaigns ‚Üí 201 (Create campaign)
### ‚úÖ GET /sale-campaigns/{id} ‚Üí 200 (Campaign details)
### ‚úÖ PUT /sale-campaigns/{id} ‚Üí 200 (Update campaign)
### ‚úÖ DELETE /sale-campaigns/{id} ‚Üí 200 (Delete campaign)
### ‚úÖ POST /sale-campaigns/{id}/products ‚Üí 200 (Add products)
### ‚úÖ DELETE /sale-campaigns/{id}/products/{productId} ‚Üí 200 (Remove product)
###
### ADMIN MANAGEMENT (4):
### ‚úÖ PATCH /admin/sale-campaigns/{id}/toggle-status ‚Üí 200
### ‚úÖ PATCH /admin/sale-campaigns/{id}/toggle-featured ‚Üí 200
### ‚úÖ POST /admin/sale-campaigns/{id}/duplicate ‚Üí 201
### ‚úÖ GET /admin/sale-campaigns/stats ‚Üí 200
###
### TOTAL: 15 ENDPOINTS TESTED ‚úÖ
###
### =================================
