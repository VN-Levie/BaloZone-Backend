# =====================================================
# BALOZONE ADMIN API COMPREHENSIVE TEST
# =====================================================
# Test t·∫•t c·∫£ c√°c API admin v√† ki·ªÉm tra t√≠nh nƒÉng th·ªëng k√™
# Base URL: http://localhost:8000/api
# Admin Account: admin@balozone.com / admin123
# =====================================================

### 1. ƒêƒÇNG NH·∫¨P ADMIN
POST http://localhost:8000/api/auth/login
Content-Type: application/json

{
  "email": "admin@balozone.com",
  "password": "admin123"
}

> {%
  if (response.status === 200) {
    client.global.set("admin_token", response.body.access_token);
    console.log("‚úÖ Admin login successful");
    console.log("Token saved for subsequent requests");
  } else {
    console.log("‚ùå Admin login failed:", response.body);
  }
%}

### =====================================================
### 2. KI·ªÇM TRA TH√îNG TIN ADMIN
### =====================================================

GET http://localhost:8000/api/auth/me
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Admin profile:", response.body.user.name);
    console.log("Role:", response.body.user.roles);
  } else {
    console.log("‚ùå Failed to get admin profile");
  }
%}

### =====================================================
### 3. QU·∫¢N L√ù NG∆Ø·ªúI D√ôNG (ADMIN USERS)
### =====================================================

### 3.1. L·∫•y danh s√°ch t·∫•t c·∫£ ng∆∞·ªùi d√πng
GET http://localhost:8000/api/admin/users?page=1&per_page=10
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Users list retrieved");
    console.log("Total users:", response.body.data.total);
    client.global.set("test_user_id", response.body.data.data[0].id);
  } else {
    console.log("‚ùå Failed to get users list");
  }
%}

### 3.2. T√¨m ki·∫øm ng∆∞·ªùi d√πng
GET http://localhost:8000/api/admin/users?search=test&status=active
Authorization: Bearer {{admin_token}}

### 3.3. L·∫•y chi ti·∫øt m·ªôt ng∆∞·ªùi d√πng
GET http://localhost:8000/api/admin/users/{{test_user_id}}
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ User details retrieved");
    console.log("User:", response.body.data.name);
    console.log("Orders count:", response.body.data.order_summary?.total_orders || 0);
  }
%}

### 3.4. C·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng
PUT http://localhost:8000/api/admin/users/{{test_user_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test User Updated",
  "phone": "0987654321",
  "status": "active"
}

### 3.5. Chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i ng∆∞·ªùi d√πng
POST http://localhost:8000/api/admin/users/{{test_user_id}}/toggle-status
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ User status toggled:", response.body.data.status);
  }
%}

### =====================================================
### 4. QU·∫¢N L√ù ƒê∆†N H√ÄNG (ADMIN ORDERS)
### =====================================================

### 4.1. L·∫•y danh s√°ch t·∫•t c·∫£ ƒë∆°n h√†ng
GET http://localhost:8000/api/admin/orders?page=1&per_page=10
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Orders list retrieved");
    console.log("Total orders:", response.body.data.total);
    if (response.body.data.data.length > 0) {
      client.global.set("test_order_id", response.body.data.data[0].id);
    }
  }
%}

### 4.2. L·ªçc ƒë∆°n h√†ng theo tr·∫°ng th√°i
GET http://localhost:8000/api/admin/orders?status=pending&payment_method=cod
Authorization: Bearer {{admin_token}}

### 4.3. L·ªçc ƒë∆°n h√†ng theo th·ªùi gian
GET http://localhost:8000/api/admin/orders?from_date=2025-01-01&to_date=2025-12-31
Authorization: Bearer {{admin_token}}

### 4.4. C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng
PUT http://localhost:8000/api/orders/{{test_order_id}}/status
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "processing",
  "note": "ƒê∆°n h√†ng ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω b·ªüi admin"
}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Order status updated:", response.body.data.status);
  }
%}

### =====================================================
### 5. QU·∫¢N L√ù LI√äN H·ªÜ (ADMIN CONTACTS)
### =====================================================

### 5.1. L·∫•y danh s√°ch li√™n h·ªá
GET http://localhost:8000/api/admin/contacts?page=1&per_page=10
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Contacts list retrieved");
    console.log("Total contacts:", response.body.data.total);
    if (response.body.data.data.length > 0) {
      client.global.set("test_contact_id", response.body.data.data[0].id);
    }
  }
%}

### 5.2. L·ªçc li√™n h·ªá theo tr·∫°ng th√°i
GET http://localhost:8000/api/admin/contacts?status=pending
Authorization: Bearer {{admin_token}}

### 5.3. T√¨m ki·∫øm li√™n h·ªá
GET http://localhost:8000/api/admin/contacts?search=balo
Authorization: Bearer {{admin_token}}

### 5.4. C·∫≠p nh·∫≠t tr·∫°ng th√°i li√™n h·ªá
PUT http://localhost:8000/api/contacts/{{test_contact_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "status": "processing",
  "admin_notes": "ƒêang x·ª≠ l√Ω y√™u c·∫ßu li√™n h·ªá",
  "priority": "normal"
}

### =====================================================
### 6. QU·∫¢N L√ù VAI TR√í (ROLES)
### =====================================================

### 6.1. L·∫•y danh s√°ch vai tr√≤
GET http://localhost:8000/api/roles
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Roles list retrieved");
    console.log("Available roles:", response.body.data.map(r => r.name));
  }
%}

### 6.2. G√°n vai tr√≤ cho ng∆∞·ªùi d√πng
POST http://localhost:8000/api/roles/assign
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "user_id": {{test_user_id}},
  "role_name": "customer"
}

### 6.3. X√≥a vai tr√≤ kh·ªèi ng∆∞·ªùi d√πng
POST http://localhost:8000/api/roles/remove
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "user_id": {{test_user_id}},
  "role_name": "contributor"
}

### =====================================================
### 7. QU·∫¢N L√ù TH∆Ø∆†NG HI·ªÜU (BRANDS)
### =====================================================

### 7.1. T·∫°o th∆∞∆°ng hi·ªáu m·ªõi
POST http://localhost:8000/api/brands
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Brand Admin",
  "description": "Th∆∞∆°ng hi·ªáu test t·ª´ admin",
  "status": "active"
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Brand created:", response.body.data.name);
    client.global.set("test_brand_id", response.body.data.id);
  }
%}

### 7.2. C·∫≠p nh·∫≠t th∆∞∆°ng hi·ªáu
PUT http://localhost:8000/api/brands/{{test_brand_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Brand Updated",
  "description": "Th∆∞∆°ng hi·ªáu ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t",
  "status": "active"
}

### 7.3. X√≥a th∆∞∆°ng hi·ªáu
DELETE http://localhost:8000/api/brands/{{test_brand_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 8. QU·∫¢N L√ù DANH M·ª§C (CATEGORIES)
### =====================================================

### 8.1. T·∫°o danh m·ª•c m·ªõi
POST http://localhost:8000/api/categories
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Category Admin",
  "description": "Danh m·ª•c test t·ª´ admin"
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Category created:", response.body.data.name);
    client.global.set("test_category_id", response.body.data.id);
  }
%}

### 8.2. C·∫≠p nh·∫≠t danh m·ª•c
PUT http://localhost:8000/api/categories/{{test_category_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Category Updated",
  "description": "Danh m·ª•c ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t"
}

### 8.3. X√≥a danh m·ª•c
DELETE http://localhost:8000/api/categories/{{test_category_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 9. QU·∫¢N L√ù S·∫¢N PH·∫®M (PRODUCTS)
### =====================================================

### 9.1. T·∫°o s·∫£n ph·∫©m m·ªõi
POST http://localhost:8000/api/products
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "category_id": 1,
  "brand_id": 1,
  "name": "Balo Test Admin",
  "description": "S·∫£n ph·∫©m test t·ª´ admin",
  "price": 999000,
  "quantity": 50,
  "color": "ƒêen"
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Product created:", response.body.data.name);
    client.global.set("test_product_id", response.body.data.id);
  }
%}

### 9.2. C·∫≠p nh·∫≠t s·∫£n ph·∫©m
PUT http://localhost:8000/api/products/{{test_product_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Balo Test Updated",
  "description": "S·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t",
  "price": 1299000,
  "quantity": 100
}

### 9.3. X√≥a s·∫£n ph·∫©m
DELETE http://localhost:8000/api/products/{{test_product_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 10. QU·∫¢N L√ù VOUCHER
### =====================================================

### 10.1. T·∫°o voucher m·ªõi
POST http://localhost:8000/api/vouchers
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "code": "ADMIN_TEST",
  "name": "Voucher Test Admin",
  "description": "Voucher test t·ª´ admin",
  "discount_type": "percentage",
  "discount_value": 15,
  "minimum_order_amount": 500000,
  "max_usage": 100,
  "start_date": "2025-01-01",
  "end_date": "2025-12-31",
  "is_active": true
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Voucher created:", response.body.data.code);
    client.global.set("test_voucher_id", response.body.data.id);
  }
%}

### 10.2. C·∫≠p nh·∫≠t voucher
PUT http://localhost:8000/api/vouchers/{{test_voucher_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Voucher Updated",
  "discount_value": 20,
  "max_usage": 200
}

### 10.3. X√≥a voucher
DELETE http://localhost:8000/api/vouchers/{{test_voucher_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 11. QU·∫¢N L√ù SALE CAMPAIGNS
### =====================================================

### 11.1. L·∫•y danh s√°ch campaigns
GET http://localhost:8000/api/sale-campaigns
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Sale campaigns retrieved");
    if (response.body.data.length > 0) {
      client.global.set("test_campaign_id", response.body.data[0].id);
    }
  }
%}

### 11.2. T·∫°o campaign m·ªõi
POST http://localhost:8000/api/sale-campaigns
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Sale Admin Test",
  "description": "Campaign test t·ª´ admin",
  "start_date": "2025-01-15",
  "end_date": "2025-01-31",
  "status": "active",
  "is_featured": true,
  "priority": 5
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Sale campaign created:", response.body.data.name);
    client.global.set("new_campaign_id", response.body.data.id);
  }
%}

### 11.3. Th√™m s·∫£n ph·∫©m v√†o campaign
POST http://localhost:8000/api/sale-campaigns/{{new_campaign_id}}/products
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "products": [
    {
      "product_id": 1,
      "sale_price": 800000,
      "discount_type": "percentage",
      "discount_percentage": 20
    },
    {
      "product_id": 2,
      "sale_price": 1200000,
      "discount_type": "fixed_amount",
      "discount_amount": 300000
    }
  ]
}

### 11.4. X√≥a campaign
DELETE http://localhost:8000/api/sale-campaigns/{{new_campaign_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 12. QU·∫¢N L√ù TIN T·ª®C (NEWS)
### =====================================================

### 12.1. T·∫°o tin t·ª©c m·ªõi
POST http://localhost:8000/api/news
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "title": "Tin t·ª©c test t·ª´ admin",
  "content": "N·ªôi dung tin t·ª©c test ƒë·ªÉ ki·ªÉm tra API admin",
  "excerpt": "T√≥m t·∫Øt tin t·ª©c test",
  "featured_image": "test-image.jpg",
  "status": "published",
  "is_featured": true
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ News created:", response.body.data.title);
    client.global.set("test_news_id", response.body.data.id);
  }
%}

### 12.2. C·∫≠p nh·∫≠t tin t·ª©c
PUT http://localhost:8000/api/news/{{test_news_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "title": "Tin t·ª©c ƒë√£ c·∫≠p nh·∫≠t",
  "content": "N·ªôi dung ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t b·ªüi admin"
}

### 12.3. X√≥a tin t·ª©c
DELETE http://localhost:8000/api/news/{{test_news_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 13. QU·∫¢N L√ù PH∆Ø∆†NG TH·ª®C THANH TO√ÅN
### =====================================================

### 13.1. T·∫°o ph∆∞∆°ng th·ª©c thanh to√°n
POST http://localhost:8000/api/payment-methods
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Payment Method",
  "description": "Ph∆∞∆°ng th·ª©c thanh to√°n test",
  "code": "TEST_PAY",
  "is_active": true,
  "sort_order": 10
}

> {%
  if (response.status === 201) {
    console.log("‚úÖ Payment method created:", response.body.data.name);
    client.global.set("test_payment_id", response.body.data.id);
  }
%}

### 13.2. C·∫≠p nh·∫≠t ph∆∞∆°ng th·ª©c thanh to√°n
PUT http://localhost:8000/api/payment-methods/{{test_payment_id}}
Authorization: Bearer {{admin_token}}
Content-Type: application/json

{
  "name": "Test Payment Updated",
  "description": "Ph∆∞∆°ng th·ª©c thanh to√°n ƒë√£ c·∫≠p nh·∫≠t"
}

### 13.3. X√≥a ph∆∞∆°ng th·ª©c thanh to√°n
DELETE http://localhost:8000/api/payment-methods/{{test_payment_id}}
Authorization: Bearer {{admin_token}}

### =====================================================
### 14. API TH·ªêNG K√ä CHO DASHBOARD ADMIN
### =====================================================

### 14.1. Th·ªëng k√™ ng∆∞·ªùi d√πng
GET http://localhost:8000/api/user-stats
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ User stats retrieved");
    console.log("Stats:", JSON.stringify(response.body.data, null, 2));
  }
%}

### 14.2. Th·ªëng k√™ ƒë∆°n h√†ng
GET http://localhost:8000/api/orders-stats
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Orders stats retrieved");
    console.log("Stats:", JSON.stringify(response.body.data, null, 2));
  }
%}

### =====================================================
### 15. KI·ªÇM TRA C√ÅC API TH·ªêNG K√ä B·ªî SUNG (N·∫æU C√ì)
### =====================================================

### 15.1. Th·ªëng k√™ ƒë∆°n h√†ng admin (n·∫øu c√≥)
GET http://localhost:8000/api/admin/orders/statistics
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Admin orders statistics available");
    console.log("Stats:", JSON.stringify(response.body.data, null, 2));
  } else if (response.status === 404) {
    console.log("‚ö†Ô∏è Admin orders statistics endpoint not implemented");
  }
%}

### 15.2. Th·ªëng k√™ li√™n h·ªá admin (n·∫øu c√≥)
GET http://localhost:8000/api/admin/contacts/statistics
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Admin contacts statistics available");
    console.log("Stats:", JSON.stringify(response.body.data, null, 2));
  } else if (response.status === 404) {
    console.log("‚ö†Ô∏è Admin contacts statistics endpoint not implemented");
  }
%}

### 15.3. Th·ªëng k√™ sale campaigns (n·∫øu c√≥)
GET http://localhost:8000/api/admin/sale-campaigns/stats
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Sale campaigns statistics available");
    console.log("Stats:", JSON.stringify(response.body.data, null, 2));
  } else if (response.status === 404) {
    console.log("‚ö†Ô∏è Sale campaigns statistics endpoint not implemented");
  }
%}

### =====================================================
### 16. DASHBOARD T·ªîNG QUAN (KI·∫æN NGH·ªä)
### =====================================================

### 16.1. API Dashboard t·ªïng quan (ki·∫øn ngh·ªã - ch∆∞a implement)
GET http://localhost:8000/api/admin/dashboard
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Dashboard API available");
    console.log("Dashboard data:", JSON.stringify(response.body.data, null, 2));
  } else if (response.status === 404) {
    console.log("‚ö†Ô∏è Dashboard API not implemented - RECOMMENDATION:");
    console.log("   Should implement /api/admin/dashboard with:");
    console.log("   - Total users, orders, products, revenue");
    console.log("   - Recent activities");
    console.log("   - Chart data for analytics");
    console.log("   - Top selling products");
    console.log("   - Recent orders");
  }
%}

### =====================================================
### 17. TEST X√ìA D·ªÆ LI·ªÜU TEST (CLEANUP)
### =====================================================

### 17.1. ƒêƒÉng xu·∫•t admin
POST http://localhost:8000/api/auth/logout
Authorization: Bearer {{admin_token}}

> {%
  if (response.status === 200) {
    console.log("‚úÖ Admin logout successful");
    console.log("üéâ ADMIN API TEST COMPLETED!");
    console.log("");
    console.log("üìä TEST SUMMARY:");
    console.log("   - User Management: ‚úÖ");
    console.log("   - Order Management: ‚úÖ");
    console.log("   - Contact Management: ‚úÖ");
    console.log("   - Role Management: ‚úÖ");
    console.log("   - Content Management: ‚úÖ");
    console.log("   - Sale Campaigns: ‚úÖ");
    console.log("   - Basic Statistics: ‚úÖ");
    console.log("");
    console.log("üîç MISSING FEATURES DETECTED:");
    console.log("   - Admin Dashboard API");
    console.log("   - Advanced Statistics APIs");
    console.log("   - Real-time Analytics");
    console.log("");
    console.log("üí° RECOMMENDATIONS:");
    console.log("   1. Implement /api/admin/dashboard");
    console.log("   2. Add more detailed statistics APIs");
    console.log("   3. Consider real-time notifications");
    console.log("   4. Add export functionality for reports");
  }
%}

### =====================================================
### END OF ADMIN API TESTS
### =====================================================
